!function s(n,o,h){function u(e,t){if(!o[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var r=o[e]={exports:{}};n[e][0].call(r.exports,function(t){return u(n[e][1][t]||t)},r,r.exports,s,n,o,h)}return o[e].exports}for(var c="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}}();var a=function(){function a(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.gameSize=t,this.speed=e,this.state=this.getEmpty2DArray(this.gameSize.height,this.gameSize.width),this.drawer=i,this.addGalaxy(),this.play=!1,this.toggleCell()}return r(a,[{key:"prepareGame",value:function(){this.drawer.draw(this.state)}},{key:"toggleGame",value:function(){var t=this;this.play=!this.play,this.play?this.timer=setInterval(function(){t.step()},this.speed):clearInterval(this.timer)}},{key:"changeSpeed",value:function(t){var e=this;this.speed=t,clearInterval(this.timer),this.timer=setInterval(function(){e.step()},this.speed)}},{key:"stopGame",value:function(){this.play=!1,clearInterval(this.timer)}},{key:"step",value:function(){for(var t=this.getEmpty2DArray(this.gameSize.height,this.gameSize.width),e=0;e<this.gameSize.height;e++)for(var i=0;i<this.gameSize.width;i++){var a=this.countAliveCells(this.state,e,i);this.state[e][i]?3!==a&&2!==a||(t[e][i]=1):3===a&&(t[e][i]=1)}this.state=t,this.drawer.draw(this.state)}},{key:"countAliveCells",value:function(t,e,i){for(var a=0,r=e-1;r<=e+1;r++)a+=this.getCellState(t,r,i-1),a+=this.getCellState(t,r,i+1);return a+=this.getCellState(t,e-1,i),a+=this.getCellState(t,e+1,i)}},{key:"getCellState",value:function(t,e,i){return(t[e]||[])[i]?1:0}},{key:"getEmpty2DArray",value:function(t,e){return new Array(t).fill(0).map(function(){return new Array(e).fill(0)})}},{key:"toggleCell",value:function(){var u=this;this.drawer.elementForDrawing.addEventListener("click",function(t){if(t.target===u.drawer.board){console.log("pik");var e=u.drawer.board.clientHeight,i=u.drawer.board.clientWidth,a=t.offsetX,r=t.offsetY,s=e/u.gameSize.height,n=i/u.gameSize.width,o=Math.floor(a/n),h=Math.floor(r/s);u.state[h][o]=u.state[h][o]?0:1,u.drawer.draw(u.state)}})}},{key:"addGalaxy",value:function(){this.state[2][2]=1,this.state[3][2]=1,this.state[4][2]=1,this.state[5][2]=1,this.state[6][2]=1,this.state[7][2]=1,this.state[2][3]=1,this.state[3][3]=1,this.state[4][3]=1,this.state[5][3]=1,this.state[6][3]=1,this.state[7][3]=1,this.state[9][2]=1,this.state[9][3]=1,this.state[9][4]=1,this.state[9][5]=1,this.state[9][6]=1,this.state[9][7]=1,this.state[10][2]=1,this.state[10][3]=1,this.state[10][4]=1,this.state[10][5]=1,this.state[10][6]=1,this.state[10][7]=1,this.state[5][9]=1,this.state[6][9]=1,this.state[7][9]=1,this.state[8][9]=1,this.state[9][9]=1,this.state[10][9]=1,this.state[5][10]=1,this.state[6][10]=1,this.state[7][10]=1,this.state[8][10]=1,this.state[9][10]=1,this.state[10][10]=1,this.state[2][5]=1,this.state[2][6]=1,this.state[2][7]=1,this.state[2][8]=1,this.state[2][9]=1,this.state[2][10]=1,this.state[3][5]=1,this.state[3][6]=1,this.state[3][7]=1,this.state[3][8]=1,this.state[3][9]=1,this.state[3][10]=1}},{key:"showControls",value:function(){document.querySelector(".controls").style.display="block"}},{key:"hideControls",value:function(){document.querySelector(".controls").style.display="none"}}]),a}();i.default=a},{}],2:[function(t,e,i){"use strict";var a=s(t("./utils/router")),r=s(t("./routes"));function s(t){return t&&t.__esModule?t:{default:t}}new a.default(r.default)},{"./routes":3,"./utils/router":5}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s(t("./gameOfLife")),r=s(t("./utils/drawer"));function s(t){return t&&t.__esModule?t:{default:t}}var n={width:+document.querySelector(".size-input.x-input").value,height:+document.querySelector(".size-input.y-input").value},o=new r.default(document.querySelector("#content"),n),h=new a.default(n,250,o);h.showControls();var u=document.querySelector(".play-button");u.addEventListener("click",function(){h.toggleGame(),1==h.play?u.innerHTML='<i class="fas fa-pause"></i>':u.innerHTML='<i class="fas fa-play"></i>'}),document.querySelector("input[type=range]").addEventListener("change",function(t){h.changeSpeed(t.target.value)});var c=[{match:"",onEnter:function(){window.location.hash="about"}},{match:"about",onBeforeEnter:function(){h.stopGame(),u.innerHTML='<i class="fas fa-play"></i>',h.hideControls()},onEnter:function(){var t=document.querySelector("#content");l("about"),t.innerHTML='\n            <div class="about">\n                <h1>\n                    <i class="fab fa-buromobelexperte label"></i>\n                    <span>Conway\'s Game of Life</span>\n                </h1>\n                <h2 class="wiki">\n                    <a class="link" href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Wikipedia</a>\n                </h2>\n                <h2><a class="link" href="https://github.com/Citrinin">Author - Kate Kuzkina</a></h2>\n            </div>'},onLeave:function(){h.showControls()}},{match:/game-(.+)/,onEnter:function(t){o.setDrawer(t[0]),l(t[0]),h.prepareGame()},onLeave:function(){}}];function l(t){document.querySelector(".active").className="",document.querySelector('[href*="'+t+'"]').parentElement.className="active"}i.default=c},{"./gameOfLife":1,"./utils/drawer":4}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}}();var r=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.elementForDrawing=t,this.gameSize=e,this.textBoard=document.createElement("pre"),this.textBoard.classList.add("text-content"),this.canvasBoard=document.createElement("canvas"),this.svgBoard=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.draw=this.drawText,this.board=this.textBoard,this.pixelSize=15,this.canvasImg=document.querySelector(".paw")}return a(i,[{key:"drawText",value:function(t){var i="";t.forEach(function(t,e){t.forEach(function(t,e){i+=t?"&#9642;":" "}),i+="\n"}),this.board.innerHTML=i}},{key:"drawCanvas",value:function(t){var a=this,r=this.board.getContext("2d"),e=r.createLinearGradient(0,0,this.gameSize.width*this.pixelSize,this.gameSize.height*this.pixelSize);e.addColorStop(0,"#cc80ff"),e.addColorStop(1,"#ffb366"),r.clearRect(0,0,this.gameSize.width*this.pixelSize,this.gameSize.height*this.pixelSize),r.fillStyle=e,t.forEach(function(t,i){t.forEach(function(t,e){t&&r.fillRect(e*a.pixelSize,i*a.pixelSize,a.pixelSize-2,a.pixelSize-2)})})}},{key:"drawSVG",value:function(t){var a=this,r='    <defs>\n        <linearGradient id="MyGradient" x1="0" x2="1" y1="0" y2="1">\n            <stop offset="0%"  stop-color="#66e0ff"/>\n            <stop offset="100%" stop-color="#b366ff"/>\n        </linearGradient>\n    </defs>';t.forEach(function(t,i){t.forEach(function(t,e){r+=t?'<rect \n                    x="'+e*a.pixelSize+'"\n                    y="'+i*a.pixelSize+'" \n                    width="'+(a.pixelSize-2)+'" \n                    height="'+(a.pixelSize-2)+'"\n                    fill="url(#MyGradient)"></rect>':""})}),this.svgBoard.innerHTML=r}},{key:"setDrawer",value:function(t){switch(this.elementForDrawing.innerHTML="",t){case"text":this.draw=this.drawText,this.board=this.textBoard;break;case"canvas":this.draw=this.drawCanvas,this.canvasBoard.height=this.gameSize.height*this.pixelSize,this.canvasBoard.width=this.gameSize.width*this.pixelSize,this.board=this.canvasBoard;break;case"svg":this.draw=this.drawSVG,this.svgBoard.setAttribute("height",this.gameSize.height*this.pixelSize),this.svgBoard.setAttribute("width",this.gameSize.width*this.pixelSize),this.board=this.svgBoard;break;default:this.draw=this.drawText,this.board=this.textBoard}this.elementForDrawing.appendChild(this.board)}}]),i}();i.default=r},{}],5:[function(t,e,i){"use strict";function a(t){var e=this;this.routes=t||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(t){e.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(i,"__esModule",{value:!0}),a.prototype={handler:function(t){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(t),this.launchHandlers()},findNewRoute:function(t){t=t.slice(1);for(var e=0;e<this.routes.length;e++){var i=this.routes[e];if("string"==typeof i.match&&i.match===t)return this.currentParams="",i;if("function"==typeof i.match&&i.match(t))return this.currentParams="",i;if(i.match instanceof RegExp&&i.match.test(t))return this.currentParams=t.match(i.match)||[],this.currentParams.splice(0,1),i}},launchHandlers:function(){var t=this;Promise.resolve().then(function(){t.previousRoute&&t.previousRoute.onLeave&&t.previousRoute.onLeave(t.previousParams)}).then(function(){t.currentRoute&&t.currentRoute.onBeforeEnter&&t.currentRoute.onBeforeEnter(t.currentParams)}).then(function(){t.currentRoute&&t.currentRoute.onEnter&&t.currentRoute.onEnter(t.currentParams)})}},i.default=a},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9mTGlmZS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9kcmF3ZXIuanMiLCJzcmMvanMvdXRpbHMvcm91dGVyLmpzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdhbWVPZkxpZmUiLCJnYW1lU2l6ZSIsInNwZWVkIiwiZHJhd2VyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInN0YXRlIiwiZ2V0RW1wdHkyREFycmF5IiwiaGVpZ2h0Iiwid2lkdGgiLCJhZGRHYWxheHkiLCJwbGF5IiwidG9nZ2xlQ2VsbCIsImRyYXciLCJfdGhpcyIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJzdGVwIiwiY2xlYXJJbnRlcnZhbCIsIm5ld1ZhbHVlIiwiX3RoaXMyIiwibmV3QXJyYXkiLCJqIiwiYWxpdmVDZWxscyIsImNvdW50QWxpdmVDZWxscyIsImFycmF5IiwieCIsInkiLCJyZXN1bHQiLCJnZXRDZWxsU3RhdGUiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfdGhpczMiLCJlbGVtZW50Rm9yRHJhd2luZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImJvYXJkIiwiY29uc29sZSIsImxvZyIsImNsaWVudEhlaWdodCIsImNsaWVudFdpZHRoIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJyb3dIZWlnaHQiLCJjZWxsV2lkdGgiLCJNYXRoIiwiZmxvb3IiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJfcm91dGVyMiIsImRlZmF1bHQiLCJfcm91dGVzMiIsInZhbHVlIiwiX2RyYXdlcjIiLCJnYW1lIiwiX2dhbWVPZkxpZmUyIiwic2hvd0NvbnRyb2xzIiwic3RhcnRCdXR0b24iLCJ0b2dnbGVHYW1lIiwiaW5uZXJIVE1MIiwiZXYiLCJjaGFuZ2VTcGVlZCIsInJvdXRlcyIsIm1hdGNoIiwib25FbnRlciIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsIm9uQmVmb3JlRW50ZXIiLCJzdG9wR2FtZSIsImhpZGVDb250cm9scyIsImNvbnRlbnQiLCJjaGFuZ2VBY3RpdmVQYWdlIiwib25MZWF2ZSIsInR5cGUiLCJzZXREcmF3ZXIiLCJwcmVwYXJlR2FtZSIsIm5ld1BhZ2UiLCJjbGFzc05hbWUiLCJwYXJlbnRFbGVtZW50IiwiRHJhd2VyIiwiYm9hcmRFbGVtZW50IiwidGV4dEJvYXJkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNhbnZhc0JvYXJkIiwic3ZnQm9hcmQiLCJjcmVhdGVFbGVtZW50TlMiLCJkcmF3VGV4dCIsInBpeGVsU2l6ZSIsImNhbnZhc0ltZyIsImdhbWVTdGF0ZSIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiZ3JkIiwiY3JlYXRlTGluZWFyR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImRyYXdDYW52YXMiLCJkcmF3U1ZHIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwicHJvdG90eXBlIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJzbGljZSIsIlJlZ0V4cCIsInRlc3QiLCJzcGxpY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMs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TUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFFQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFFQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLEdBQUEsRUFFQUQsS0FBQUMsTUFBQSxHQUFBLElBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLElBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLElBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLElBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLElBQUEsRUFDQUQsS0FBQUMsTUFBQSxJQUFBLElBQUEsRUFFQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLElBQUEsRUFFQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFBLEdBQUEsRUFDQUQsS0FBQUMsTUFBQSxHQUFB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QUZBbEUsS0FBQStHLGNBQXFCN0MsRUFBQUosTUFBV2dDLEVBQVhoQyxRQUFyQixHQUNBOUQsS0FBQStHLGNBQUFTLE9BQUEsRUFBQSxHQUNBMUIsSUF2QkdzQixlQUFBLFdBMkJFLElBQUFyRyxFQUFBZixLQUNieUgsUUFBQUMsVUFBQUMsS0FDVSxXQUFRNUcsRUFBQStGLGVBQXNCL0YsRUFBQStGLGNBQXRCdEMsU0FBb0R6RCxFQUFBK0YsY0FBQXRDLFFBQTJCekQsRUFBL0VpRyxrQkFEbEJXLEtBRVUsV0FBUTVHLEVBQUE4RixjQUFxQjlGLEVBQUE4RixhQUFyQjFDLGVBQXdEcEQsRUFBQThGLGFBQUExQyxjQUFnQ3BELEVBQXhGZ0csaUJBRmxCWSxLQUdVLFdBQVE1RyxFQUFBOEYsY0FBcUI5RixFQUFBOEYsYUFBckI5QyxTQUFrRGhELEVBQUE4RixhQUFBOUMsUUFBMEJoRCxFQUE1RWdHLDZCQUlYSiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZU9mTGlmZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU2l6ZSwgc3BlZWQsIGRyYXdlcikge1xyXG4gICAgICAgIHRoaXMuZ2FtZVNpemUgPSBnYW1lU2l6ZTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0RW1wdHkyREFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLmhlaWdodCxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5kcmF3ZXIgPSBkcmF3ZXI7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkR2FsYXh5KCk7XHJcbiAgICAgICAgdGhpcy5wbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDZWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGFyZUdhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3ZXIuZHJhdyh0aGlzLnN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVHYW1lKCkge1xyXG4gICAgICAgIHRoaXMucGxheSA9ICF0aGlzLnBsYXk7XHJcbiAgICAgICAgaWYgKHRoaXMucGxheSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMuc3BlZWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hhbmdlU3BlZWQobmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gbmV3VmFsdWU7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcclxuICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICB9LCB0aGlzLnNwZWVkKTtcclxuICAgIH1cclxuICAgIHN0b3BHYW1lKCkge1xyXG4gICAgICAgIHRoaXMucGxheSA9IGZhbHNlO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICB9XHJcbiAgICBzdGVwKCkge1xyXG4gICAgICAgIHZhciBuZXdBcnJheSA9IHRoaXMuZ2V0RW1wdHkyREFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLmhlaWdodCxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lU2l6ZS5oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZ2FtZVNpemUud2lkdGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsaXZlQ2VsbHMgPSB0aGlzLmNvdW50QWxpdmVDZWxscyh0aGlzLnN0YXRlLCBpLCBqKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsaXZlQ2VsbHMgPT09IDMgfHwgYWxpdmVDZWxscyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnJheVtpXVtqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxpdmVDZWxscyA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnJheVtpXVtqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBuZXdBcnJheTtcclxuICAgICAgICB0aGlzLmRyYXdlci5kcmF3KHRoaXMuc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvdW50QWxpdmVDZWxscyhhcnJheSwgeCwgeSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSB4IC0gMTsgaSA8PSB4ICsgMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmdldENlbGxTdGF0ZShhcnJheSwgaSwgeSAtIDEpO1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXRDZWxsU3RhdGUoYXJyYXksIGksIHkgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0ICs9IHRoaXMuZ2V0Q2VsbFN0YXRlKGFycmF5LCB4IC0gMSwgeSk7XHJcbiAgICAgICAgcmVzdWx0ICs9IHRoaXMuZ2V0Q2VsbFN0YXRlKGFycmF5LCB4ICsgMSwgeSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZWxsU3RhdGUoYXJyYXksIHgsIHkpIHtcclxuICAgICAgICByZXR1cm4gKGFycmF5W3hdIHx8IFtdKVt5XSA/IDEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVtcHR5MkRBcnJheShoZWlnaHQsIHdpZHRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheShoZWlnaHQpLmZpbGwoMCkubWFwKCgpID0+IG5ldyBBcnJheSh3aWR0aCkuZmlsbCgwKSk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVDZWxsKCkge1xyXG4gICAgICAgIHRoaXMuZHJhd2VyLmVsZW1lbnRGb3JEcmF3aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSB0aGlzLmRyYXdlci5ib2FyZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwaWsnKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuZHJhd2VyLmJvYXJkLmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5kcmF3ZXIuYm9hcmQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIHZhciB4ID0gZXZlbnQub2Zmc2V0WDtcclxuICAgICAgICAgICAgdmFyIHkgPSBldmVudC5vZmZzZXRZO1xyXG4gICAgICAgICAgICB2YXIgcm93SGVpZ2h0ID0gaGVpZ2h0IC8gdGhpcy5nYW1lU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciBjZWxsV2lkdGggPSB3aWR0aCAvIHRoaXMuZ2FtZVNpemUud2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRYID0gTWF0aC5mbG9vcih4IC8gY2VsbFdpZHRoKTtcclxuICAgICAgICAgICAgdmFyIG9mZnNldFkgPSBNYXRoLmZsb29yKHkgLyByb3dIZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlW29mZnNldFldW29mZnNldFhdID0gdGhpcy5zdGF0ZVtvZmZzZXRZXVtvZmZzZXRYXSA/IDAgOiAxO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdlci5kcmF3KHRoaXMuc3RhdGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYWRkR2FsYXh5KCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bMl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbM11bMl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbNF1bMl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbNV1bMl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbNl1bMl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbN11bMl0gPSAxO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlWzJdWzNdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzNdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzRdWzNdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzVdWzNdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzZdWzNdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzddWzNdID0gMTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVsyXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVs0XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVs1XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVs2XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVs3XSA9IDE7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVbMTBdWzJdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzEwXVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsxMF1bNF0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMTBdWzVdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzEwXVs2XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsxMF1bN10gPSAxO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlWzVdWzldID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzZdWzldID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzddWzldID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzhdWzldID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzldWzldID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzEwXVs5XSA9IDE7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVbNV1bMTBdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzZdWzEwXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs3XVsxMF0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbOF1bMTBdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzldWzEwXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsxMF1bMTBdID0gMTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVs1XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVs2XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVs3XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVs4XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVsxMF0gPSAxO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzVdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzZdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzddID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzhdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzldID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzEwXSA9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NvbnRyb2xzKCkge1xyXG4gICAgICAgIHZhciBjb250cm9sc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9scycpO1xyXG4gICAgICAgIGNvbnRyb2xzRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDb250cm9scygpIHtcclxuICAgICAgICB2YXIgY29udHJvbHNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbHMnKTtcclxuICAgICAgICBjb250cm9sc0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBSb3V0ZXIgZnJvbSAnLi91dGlscy9yb3V0ZXInO1xyXG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcclxuXHJcbm5ldyBSb3V0ZXIocm91dGVzKTsiLCJpbXBvcnQgR2FtZU9mTGlmZSBmcm9tICcuL2dhbWVPZkxpZmUnO1xyXG5pbXBvcnQgRHJhd2VyIGZyb20gJy4vdXRpbHMvZHJhd2VyJztcclxuXHJcbmxldCBnYW1lU2l6ZSA9IHtcclxuICAgIHdpZHRoOiArZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpemUtaW5wdXQueC1pbnB1dCcpLnZhbHVlLFxyXG4gICAgaGVpZ2h0OiArZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpemUtaW5wdXQueS1pbnB1dCcpLnZhbHVlXHJcbn07XHJcblxyXG5sZXQgZHJhd2VyID0gbmV3IERyYXdlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpLCBnYW1lU2l6ZSk7XHJcbmxldCBnYW1lID0gbmV3IEdhbWVPZkxpZmUoZ2FtZVNpemUsIDI1MCwgZHJhd2VyKTtcclxuXHJcbmdhbWUuc2hvd0NvbnRyb2xzKCk7XHJcbmxldCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5LWJ1dHRvbicpO1xyXG5zdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGdhbWUudG9nZ2xlR2FtZSgpO1xyXG4gICAgaWYgKGdhbWUucGxheSA9PSB0cnVlKSB7XHJcbiAgICAgICAgc3RhcnRCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmFzIGZhLXBhdXNlXCI+PC9pPic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0YXJ0QnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhcyBmYS1wbGF5XCI+PC9pPic7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubGV0IHNwZWVkUmFuZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPXJhbmdlXScpO1xyXG5zcGVlZFJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ID0+IHtcclxuICAgIGdhbWUuY2hhbmdlU3BlZWQoZXYudGFyZ2V0LnZhbHVlKTtcclxufSk7XHJcblxyXG5sZXQgcm91dGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2Fib3V0JztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnYWJvdXQnLFxyXG4gICAgICAgIG9uQmVmb3JlRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgZ2FtZS5zdG9wR2FtZSgpO1xyXG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtcGxheVwiPjwvaT4nO1xyXG4gICAgICAgICAgICBnYW1lLmhpZGVDb250cm9scygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2Fib3V0Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWJvdXRcIj5cclxuICAgICAgICAgICAgICAgIDxoMT5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhYiBmYS1idXJvbW9iZWxleHBlcnRlIGxhYmVsXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPkNvbndheVxcJ3MgR2FtZSBvZiBMaWZlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9oMT5cclxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIndpa2lcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImxpbmtcIiBocmVmPVwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29ud2F5JTI3c19HYW1lX29mX0xpZmVcIj5XaWtpcGVkaWE8L2E+XHJcbiAgICAgICAgICAgICAgICA8L2gyPlxyXG4gICAgICAgICAgICAgICAgPGgyPjxhIGNsYXNzPVwibGlua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vQ2l0cmluaW5cIj5BdXRob3IgLSBLYXRlIEt1emtpbmE8L2E+PC9oMj5cclxuICAgICAgICAgICAgPC9kaXY+YDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTGVhdmU6ICgpID0+IHtcclxuICAgICAgICAgICAgZ2FtZS5zaG93Q29udHJvbHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAvZ2FtZS0oLispLyxcclxuICAgICAgICBvbkVudGVyOiB0eXBlID0+IHtcclxuICAgICAgICAgICAgZHJhd2VyLnNldERyYXdlcih0eXBlWzBdKTtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSh0eXBlWzBdKTtcclxuICAgICAgICAgICAgZ2FtZS5wcmVwYXJlR2FtZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25MZWF2ZTogKCkgPT4ge31cclxuICAgIH1cclxuXTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZVBhZ2UobmV3UGFnZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2hyZWYqPVwiJHtuZXdQYWdlfVwiXWApLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID1cclxuICAgICAgICAnYWN0aXZlJztcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEcmF3ZXIge1xyXG4gICAgY29uc3RydWN0b3IoYm9hcmRFbGVtZW50LCBnYW1lU2l6ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudEZvckRyYXdpbmcgPSBib2FyZEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5nYW1lU2l6ZSA9IGdhbWVTaXplO1xyXG5cclxuICAgICAgICB0aGlzLnRleHRCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ByZScpO1xyXG4gICAgICAgIHRoaXMudGV4dEJvYXJkLmNsYXNzTGlzdC5hZGQoJ3RleHQtY29udGVudCcpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICB0aGlzLnN2Z0JvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFxyXG4gICAgICAgICAgICAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFxyXG4gICAgICAgICAgICAnc3ZnJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhdyA9IHRoaXMuZHJhd1RleHQ7XHJcbiAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMudGV4dEJvYXJkO1xyXG5cclxuICAgICAgICB0aGlzLnBpeGVsU2l6ZSA9IDE1O1xyXG5cclxuICAgICAgICB0aGlzLmNhbnZhc0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXcnKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3VGV4dChnYW1lU3RhdGUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgZ2FtZVN0YXRlLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5mb3JFYWNoKChlbGVtZW50LCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZWxlbWVudCA/ICcmIzk2NDI7JyA6ICcgJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSAnXFxuJztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmJvYXJkLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q2FudmFzKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5ib2FyZC5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHZhciBncmQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLndpZHRoICogdGhpcy5waXhlbFNpemUsXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVNpemUuaGVpZ2h0ICogdGhpcy5waXhlbFNpemVcclxuICAgICAgICApO1xyXG4gICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMCwgJyNjYzgwZmYnKTtcclxuICAgICAgICBncmQuYWRkQ29sb3JTdG9wKDEsICcjZmZiMzY2Jyk7XHJcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVNpemUud2lkdGggKiB0aGlzLnBpeGVsU2l6ZSxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS5oZWlnaHQgKiB0aGlzLnBpeGVsU2l6ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBncmQ7XHJcbiAgICAgICAgZ2FtZVN0YXRlLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5mb3JFYWNoKChlbGVtZW50LCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgaiAqIHRoaXMucGl4ZWxTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpICogdGhpcy5waXhlbFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxTaXplIC0gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waXhlbFNpemUgLSAyXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1NWRyhnYW1lU3RhdGUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gYCAgICA8ZGVmcz5cclxuICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJNeUdyYWRpZW50XCIgeDE9XCIwXCIgeDI9XCIxXCIgeTE9XCIwXCIgeTI9XCIxXCI+XHJcbiAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjAlXCIgIHN0b3AtY29sb3I9XCIjNjZlMGZmXCIvPlxyXG4gICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3RvcC1jb2xvcj1cIiNiMzY2ZmZcIi8+XHJcbiAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cclxuICAgIDwvZGVmcz5gO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uZm9yRWFjaCgoZWxlbWVudCwgaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICA/IGA8cmVjdCBcclxuICAgICAgICAgICAgICAgICAgICB4PVwiJHtqICogdGhpcy5waXhlbFNpemV9XCJcclxuICAgICAgICAgICAgICAgICAgICB5PVwiJHtpICogdGhpcy5waXhlbFNpemV9XCIgXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIke3RoaXMucGl4ZWxTaXplIC0gMn1cIiBcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIke3RoaXMucGl4ZWxTaXplIC0gMn1cIlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ1cmwoI015R3JhZGllbnQpXCI+PC9yZWN0PmBcclxuICAgICAgICAgICAgICAgICAgICA6ICcnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN2Z0JvYXJkLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBzZXREcmF3ZXIodHlwZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudEZvckRyYXdpbmcuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RleHQnOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcgPSB0aGlzLmRyYXdUZXh0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMudGV4dEJvYXJkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnY2FudmFzJzoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3ID0gdGhpcy5kcmF3Q2FudmFzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNCb2FyZC5oZWlnaHQgPSB0aGlzLmdhbWVTaXplLmhlaWdodCAqIHRoaXMucGl4ZWxTaXplO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXNCb2FyZC53aWR0aCA9IHRoaXMuZ2FtZVNpemUud2lkdGggKiB0aGlzLnBpeGVsU2l6ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmQgPSB0aGlzLmNhbnZhc0JvYXJkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnc3ZnJzoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3ID0gdGhpcy5kcmF3U1ZHO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdmdCb2FyZC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS5oZWlnaHQgKiB0aGlzLnBpeGVsU2l6ZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnQm9hcmQuc2V0QXR0cmlidXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICd3aWR0aCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aCAqIHRoaXMucGl4ZWxTaXplXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMuc3ZnQm9hcmQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcgPSB0aGlzLmRyYXdUZXh0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMudGV4dEJvYXJkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Rm9yRHJhd2luZy5hcHBlbmRDaGlsZCh0aGlzLmJvYXJkKTtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICog0KTRg9C90LrRhtC40Y8g0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC4INC+0LHRgNCw0LHQvtGC0LrQuCDRgNC+0YPRgtC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAqIEBwYXJhbSB7Kn0gcm91dGVQYXJhbXMg0LzQsNGB0YHQuNCyINC/0LDRgNCw0LzQtdGC0YDQvtCyINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyXHJcbiAqL1xyXG5mdW5jdGlvbiBSb3V0ZXIocm91dGVQYXJhbXMpIHtcclxuICAgIHRoaXMucm91dGVzID0gcm91dGVQYXJhbXMgfHwgW107XHJcbiAgICB0aGlzLmN1cnJlbnRSb3V0ZTtcclxuICAgIHRoaXMucHJldmlvdXNSb3V0ZTtcclxuICAgIHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgIHRoaXMucHJldmlvdXNQYXJhbXM7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbiAgICB9KVxyXG4gICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxufVxyXG5cclxuUm91dGVyLnByb3RvdHlwZSA9IHtcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uKGhhc2gpIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzUm91dGUgPSB0aGlzLmN1cnJlbnRSb3V0ZTtcclxuICAgICAgICB0aGlzLnByZXZpb3VzUGFyYW1zID0gdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJvdXRlID0gdGhpcy5maW5kTmV3Um91dGUoaGFzaCk7XHJcbiAgICAgICAgdGhpcy5sYXVuY2hIYW5kbGVycygpO1xyXG4gICAgfSxcclxuICAgIGZpbmROZXdSb3V0ZTogZnVuY3Rpb24oaGFzaCkge1xyXG4gICAgICAgIGhhc2ggPSBoYXNoLnNsaWNlKDEpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucm91dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5yb3V0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZWxlbWVudC5tYXRjaCkgPT0gXCJzdHJpbmdcIiAmJiBlbGVtZW50Lm1hdGNoID09PSBoYXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoZWxlbWVudC5tYXRjaCkgPT0gXCJmdW5jdGlvblwiICYmIGVsZW1lbnQubWF0Y2goaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChlbGVtZW50Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IGhhc2gubWF0Y2goZWxlbWVudC5tYXRjaCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbGF1bmNoSGFuZGxlcnMoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLnByZXZpb3VzUm91dGUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUodGhpcy5wcmV2aW91c1BhcmFtcykgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLmN1cnJlbnRSb3V0ZSAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyICYmIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIodGhpcy5jdXJyZW50UGFyYW1zKSB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSb3V0ZXI7Il19
