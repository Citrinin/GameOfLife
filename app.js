!function n(s,o,h){function u(e,t){if(!o[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var r=o[e]={exports:{}};s[e][0].call(r.exports,function(t){return u(s[e][1][t]||t)},r,r.exports,n,s,o,h)}return o[e].exports}for(var c="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}}();var a=function(){function a(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.gameSize=t,this.speed=e,this.state=this.getEmpty2DArray(this.gameSize.height,this.gameSize.width),this.drawer=i,this.addGalaxy(),this.play=!1,this.toggleCell()}return r(a,[{key:"prepareGame",value:function(){this.drawer.draw(this.state)}},{key:"toggleGame",value:function(){var t=this;this.play=!this.play,this.play?this.timer=setInterval(function(){t.step()},this.speed):clearInterval(this.timer)}},{key:"changeSpeed",value:function(t){var e=this;this.speed=t,clearInterval(this.timer),this.timer=setInterval(function(){e.step()},this.speed)}},{key:"stopGame",value:function(){this.play=!1,clearInterval(this.timer)}},{key:"step",value:function(){for(var t=this.getEmpty2DArray(this.gameSize.height,this.gameSize.width),e=0;e<this.gameSize.height;e++)for(var i=0;i<this.gameSize.width;i++){var a=this.countAliveCells(this.state,e,i);this.state[e][i]?3!==a&&2!==a||(t[e][i]=1):3===a&&(t[e][i]=1)}this.state=t,this.drawer.draw(this.state)}},{key:"countAliveCells",value:function(t,e,i){for(var a=0,r=e-1;r<=e+1;r++)a+=this.getCellState(t,r,i-1),a+=this.getCellState(t,r,i+1);return a+=this.getCellState(t,e-1,i),a+=this.getCellState(t,e+1,i)}},{key:"getCellState",value:function(t,e,i){return(t[e]||[])[i]?1:0}},{key:"getEmpty2DArray",value:function(t,e){return new Array(t).fill(0).map(function(){return new Array(e).fill(0)})}},{key:"toggleCell",value:function(){var u=this;this.drawer.elementForDrawing.addEventListener("click",function(t){if(t.target===u.drawer.board){var e=u.drawer.board.clientHeight,i=u.drawer.board.clientWidth,a=t.offsetX,r=t.offsetY,n=e/u.gameSize.height,s=i/u.gameSize.width,o=Math.floor(a/s),h=Math.floor(r/n);u.state[h][o]=u.state[h][o]?0:1,u.drawer.draw(u.state)}})}},{key:"addGalaxy",value:function(){this.state[2][2]=1,this.state[3][2]=1,this.state[4][2]=1,this.state[5][2]=1,this.state[6][2]=1,this.state[7][2]=1,this.state[2][3]=1,this.state[3][3]=1,this.state[4][3]=1,this.state[5][3]=1,this.state[6][3]=1,this.state[7][3]=1,this.state[9][2]=1,this.state[9][3]=1,this.state[9][4]=1,this.state[9][5]=1,this.state[9][6]=1,this.state[9][7]=1,this.state[10][2]=1,this.state[10][3]=1,this.state[10][4]=1,this.state[10][5]=1,this.state[10][6]=1,this.state[10][7]=1,this.state[5][9]=1,this.state[6][9]=1,this.state[7][9]=1,this.state[8][9]=1,this.state[9][9]=1,this.state[10][9]=1,this.state[5][10]=1,this.state[6][10]=1,this.state[7][10]=1,this.state[8][10]=1,this.state[9][10]=1,this.state[10][10]=1,this.state[2][5]=1,this.state[2][6]=1,this.state[2][7]=1,this.state[2][8]=1,this.state[2][9]=1,this.state[2][10]=1,this.state[3][5]=1,this.state[3][6]=1,this.state[3][7]=1,this.state[3][8]=1,this.state[3][9]=1,this.state[3][10]=1}},{key:"showControls",value:function(){document.querySelector(".controls").style.display="block"}},{key:"hideControls",value:function(){document.querySelector(".controls").style.display="none"}},{key:"changeSize",value:function(){for(var t=this.getEmpty2DArray(this.gameSize.height,this.gameSize.width),e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i]=(this.state[e]||[])[i]||0;this.state=t,this.drawer.draw(this.state)}}]),a}();i.default=a},{}],2:[function(t,e,i){"use strict";var a=n(t("./utils/router")),r=n(t("./routes"));function n(t){return t&&t.__esModule?t:{default:t}}new a.default(r.default)},{"./routes":3,"./utils/router":5}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=n(t("./gameOfLife")),r=n(t("./utils/drawer"));function n(t){return t&&t.__esModule?t:{default:t}}var s={width:+document.querySelector(".x-input").value,height:+document.querySelector(".y-input").value},o=new r.default(document.querySelector("#content"),s),h=new a.default(s,250,o);h.showControls();var u=document.querySelector(".play-button");u.addEventListener("click",function(){h.toggleGame(),1==h.play?u.innerHTML='<i class="fas fa-pause"></i>':u.innerHTML='<i class="fas fa-play"></i>'}),document.querySelector("input[type=range]").addEventListener("change",function(t){h.changeSpeed(t.target.value)}),document.querySelector(".x-input").addEventListener("change",function(t){t.target.validity.valid?(s.width=+t.target.value,h.changeSize(),o.changeSize()):t.target.value=s.width}),document.querySelector(".y-input").addEventListener("change",function(t){t.target.validity.valid?(s.height=+t.target.value,h.changeSize(),o.changeSize()):t.target.value=s.height});var c=[{match:"",onEnter:function(){window.location.hash="about"}},{match:"about",onBeforeEnter:function(){h.stopGame(),u.innerHTML='<i class="fas fa-play"></i>',h.hideControls()},onEnter:function(){var t=document.querySelector("#content");l("about"),t.innerHTML='\n            <div class="about">\n                <h1>\n                    <i class="fab fa-buromobelexperte label"></i>\n                    <span>Conway\'s Game of Life</span>\n                </h1>\n                <h2 class="wiki">\n                    <a class="link" href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Wikipedia</a>\n                </h2>\n                <h2><a class="link" href="https://github.com/Citrinin">Author - Kate Kuzkina</a></h2>\n            </div>'},onLeave:function(){h.showControls()}},{match:/game-(.+)/,onEnter:function(t){o.setDrawer(t[0]),l(t[0]),h.prepareGame()},onLeave:function(){}}];function l(t){document.querySelector(".active").className="",document.querySelector('[href*="'+t+'"]').parentElement.className="active"}i.default=c},{"./gameOfLife":1,"./utils/drawer":4}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}}();var r=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.elementForDrawing=t,this.gameSize=e,this.textBoard=document.createElement("pre"),this.textBoard.classList.add("text-content"),this.canvasBoard=document.createElement("canvas"),this.svgBoard=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.draw=this.drawText,this.board=this.textBoard,this.pixelSize=15,this.changeSize()}return a(i,[{key:"drawText",value:function(t){var i="";t.forEach(function(t,e){t.forEach(function(t,e){i+=t?"X":" "}),i+="\n"}),this.board.innerHTML=i}},{key:"drawCanvas",value:function(t){var a=this,r=this.board.getContext("2d"),e=r.createLinearGradient(0,0,this.gameSize.width*this.pixelSize,this.gameSize.height*this.pixelSize);e.addColorStop(0,"#cc80ff"),e.addColorStop(1,"#ffb366"),r.clearRect(0,0,this.gameSize.width*this.pixelSize,this.gameSize.height*this.pixelSize),r.fillStyle=e,t.forEach(function(t,i){t.forEach(function(t,e){t&&r.fillRect(e*a.pixelSize,i*a.pixelSize,a.pixelSize-2,a.pixelSize-2)})})}},{key:"drawSVG",value:function(t){var a=this,r='    <defs>\n        <linearGradient id="MyGradient" x1="0" x2="1" y1="0" y2="1">\n            <stop offset="0%"  stop-color="#66e0ff"/>\n            <stop offset="100%" stop-color="#b366ff"/>\n        </linearGradient>\n    </defs>';t.forEach(function(t,i){t.forEach(function(t,e){r+=t?'<rect \n                    x="'+e*a.pixelSize+'"\n                    y="'+i*a.pixelSize+'" \n                    width="'+(a.pixelSize-2)+'" \n                    height="'+(a.pixelSize-2)+'"\n                    fill="url(#MyGradient)"></rect>':""})}),this.svgBoard.innerHTML=r}},{key:"setDrawer",value:function(t){switch(this.elementForDrawing.innerHTML="",t){case"text":this.draw=this.drawText,this.board=this.textBoard;break;case"canvas":this.draw=this.drawCanvas,this.board=this.canvasBoard;break;case"svg":this.draw=this.drawSVG,this.board=this.svgBoard;break;default:this.draw=this.drawText,this.board=this.textBoard}this.elementForDrawing.appendChild(this.board)}},{key:"changeSize",value:function(){this.svgBoard.setAttribute("height",this.gameSize.height*this.pixelSize),this.svgBoard.setAttribute("width",this.gameSize.width*this.pixelSize),this.canvasBoard.height=this.gameSize.height*this.pixelSize,this.canvasBoard.width=this.gameSize.width*this.pixelSize}}]),i}();i.default=r},{}],5:[function(t,e,i){"use strict";function a(t){var e=this;this.routes=t||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(t){e.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(i,"__esModule",{value:!0}),a.prototype={handler:function(t){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(t),this.launchHandlers()},findNewRoute:function(t){t=t.slice(1);for(var e=0;e<this.routes.length;e++){var i=this.routes[e];if("string"==typeof i.match&&i.match===t)return this.currentParams="",i;if("function"==typeof i.match&&i.match(t))return this.currentParams="",i;if(i.match instanceof RegExp&&i.match.test(t))return this.currentParams=t.match(i.match)||[],this.currentParams.splice(0,1),i}},launchHandlers:function(){var t=this;Promise.resolve().then(function(){t.previousRoute&&t.previousRoute.onLeave&&t.previousRoute.onLeave(t.previousParams)}).then(function(){t.currentRoute&&t.currentRoute.onBeforeEnter&&t.currentRoute.onBeforeEnter(t.currentParams)}).then(function(){t.currentRoute&&t.currentRoute.onEnter&&t.currentRoute.onEnter(t.currentParams)})}},i.default=a},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9mTGlmZS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9kcmF3ZXIuanMiLCJzcmMvanMvdXRpbHMvcm91dGVyLmpzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIkdhbWVPZkxpZmUiLCJnYW1lU2l6ZSIsInNwZWVkIiwiZHJhd2VyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInN0YXRlIiwiZ2V0RW1wdHkyREFycmF5IiwiaGVpZ2h0Iiwid2lkdGgiLCJhZGRHYWxheHkiLCJwbGF5IiwidG9nZ2xlQ2VsbCIsImRyYXciLCJfdGhpcyIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJzdGVwIiwiY2xlYXJJbnRlcnZhbCIsIm5ld1ZhbHVlIiwiX3RoaXMyIiwibmV3QXJyYXkiLCJqIiwiYWxpdmVDZWxscyIsImNvdW50QWxpdmVDZWxscyIsImFycmF5IiwieCIsInkiLCJyZXN1bHQiLCJnZXRDZWxsU3RhdGUiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfdGhpczMiLCJlbGVtZW50Rm9yRHJhd2luZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImJvYXJkIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJvZmZzZXRYIiwib2Zmc2V0WSIsInJvd0hlaWdodCIsImNlbGxXaWR0aCIsIk1hdGgiLCJmbG9vciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiZGlzcGxheSIsIm5ld1N0YXRlIiwiX3JvdXRlcjIiLCJkZWZhdWx0IiwiX3JvdXRlczIiLCJ2YWx1ZSIsIl9kcmF3ZXIyIiwiZ2FtZSIsIl9nYW1lT2ZMaWZlMiIsInNob3dDb250cm9scyIsInN0YXJ0QnV0dG9uIiwidG9nZ2xlR2FtZSIsImlubmVySFRNTCIsImV2IiwiY2hhbmdlU3BlZWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2hhbmdlU2l6ZSIsInJvdXRlcyIsIm1hdGNoIiwib25FbnRlciIsIndpbmRvdyIsImxvY2F0aW9uIiwiaGFzaCIsIm9uQmVmb3JlRW50ZXIiLCJzdG9wR2FtZSIsImhpZGVDb250cm9scyIsImNvbnRlbnQiLCJjaGFuZ2VBY3RpdmVQYWdlIiwib25MZWF2ZSIsInR5cGUiLCJzZXREcmF3ZXIiLCJwcmVwYXJlR2FtZSIsIm5ld1BhZ2UiLCJjbGFzc05hbWUiLCJwYXJlbnRFbGVtZW50IiwiRHJhd2VyIiwiYm9hcmRFbGVtZW50IiwidGV4dEJvYXJkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNhbnZhc0JvYXJkIiwic3ZnQm9hcmQiLCJjcmVhdGVFbGVtZW50TlMiLCJkcmF3VGV4dCIsInBpeGVsU2l6ZSIsImdhbWVTdGF0ZSIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiZ3JkIiwiY3JlYXRlTGluZWFyR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImRyYXdDYW52YXMiLCJkcmF3U1ZHIiwiYXBwZW5kQ2hpbGQiLCJzZXRBdHRyaWJ1dGUiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwicHJvdG90eXBlIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJzbGljZSIsIlJlZ0V4cCIsInRlc3QiLCJzcGxpY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FB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LEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUVBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUVBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsR0FBQSxFQUVBRCxLQUFBQyxNQUFBLEdBQUEsSUFBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsSUFBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsSUFBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsSUFBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsSUFBQSxFQUNBRCxLQUFBQyxNQUFBLElBQUEsSUFBQSxFQUVBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsSUFBQSxFQUVBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FBQSxFQUNBRCxLQUFBQyxNQUFBLEdBQUEsR0FB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QUdVLFdBQVE3RyxFQUFBK0YsY0FBcUIvRixFQUFBK0YsYUFBckI3QyxTQUFrRGxELEVBQUErRixhQUFBN0MsUUFBMEJsRCxFQUE1RWlHLDZCQUlYSiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZU9mTGlmZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU2l6ZSwgc3BlZWQsIGRyYXdlcikge1xyXG4gICAgICAgIHRoaXMuZ2FtZVNpemUgPSBnYW1lU2l6ZTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0RW1wdHkyREFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLmhlaWdodCxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5kcmF3ZXIgPSBkcmF3ZXI7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkR2FsYXh5KCk7XHJcbiAgICAgICAgdGhpcy5wbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDZWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGFyZUdhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3ZXIuZHJhdyh0aGlzLnN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVHYW1lKCkge1xyXG4gICAgICAgIHRoaXMucGxheSA9ICF0aGlzLnBsYXk7XHJcbiAgICAgICAgaWYgKHRoaXMucGxheSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMuc3BlZWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hhbmdlU3BlZWQobmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gbmV3VmFsdWU7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcclxuICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICB9LCB0aGlzLnNwZWVkKTtcclxuICAgIH1cclxuICAgIHN0b3BHYW1lKCkge1xyXG4gICAgICAgIHRoaXMucGxheSA9IGZhbHNlO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICB9XHJcbiAgICBzdGVwKCkge1xyXG4gICAgICAgIHZhciBuZXdBcnJheSA9IHRoaXMuZ2V0RW1wdHkyREFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLmhlaWdodCxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lU2l6ZS5oZWlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZ2FtZVNpemUud2lkdGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsaXZlQ2VsbHMgPSB0aGlzLmNvdW50QWxpdmVDZWxscyh0aGlzLnN0YXRlLCBpLCBqKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsaXZlQ2VsbHMgPT09IDMgfHwgYWxpdmVDZWxscyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnJheVtpXVtqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxpdmVDZWxscyA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnJheVtpXVtqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBuZXdBcnJheTtcclxuICAgICAgICB0aGlzLmRyYXdlci5kcmF3KHRoaXMuc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvdW50QWxpdmVDZWxscyhhcnJheSwgeCwgeSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSB4IC0gMTsgaSA8PSB4ICsgMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmdldENlbGxTdGF0ZShhcnJheSwgaSwgeSAtIDEpO1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXRDZWxsU3RhdGUoYXJyYXksIGksIHkgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0ICs9IHRoaXMuZ2V0Q2VsbFN0YXRlKGFycmF5LCB4IC0gMSwgeSk7XHJcbiAgICAgICAgcmVzdWx0ICs9IHRoaXMuZ2V0Q2VsbFN0YXRlKGFycmF5LCB4ICsgMSwgeSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZWxsU3RhdGUoYXJyYXksIHgsIHkpIHtcclxuICAgICAgICByZXR1cm4gKGFycmF5W3hdIHx8IFtdKVt5XSA/IDEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVtcHR5MkRBcnJheShoZWlnaHQsIHdpZHRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheShoZWlnaHQpLmZpbGwoMCkubWFwKCgpID0+IG5ldyBBcnJheSh3aWR0aCkuZmlsbCgwKSk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVDZWxsKCkge1xyXG4gICAgICAgIHRoaXMuZHJhd2VyLmVsZW1lbnRGb3JEcmF3aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSB0aGlzLmRyYXdlci5ib2FyZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmRyYXdlci5ib2FyZC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZHJhd2VyLmJvYXJkLmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICB2YXIgeCA9IGV2ZW50Lm9mZnNldFg7XHJcbiAgICAgICAgICAgIHZhciB5ID0gZXZlbnQub2Zmc2V0WTtcclxuICAgICAgICAgICAgdmFyIHJvd0hlaWdodCA9IGhlaWdodCAvIHRoaXMuZ2FtZVNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICB2YXIgY2VsbFdpZHRoID0gd2lkdGggLyB0aGlzLmdhbWVTaXplLndpZHRoO1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IE1hdGguZmxvb3IoeCAvIGNlbGxXaWR0aCk7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRZID0gTWF0aC5mbG9vcih5IC8gcm93SGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZVtvZmZzZXRZXVtvZmZzZXRYXSA9IHRoaXMuc3RhdGVbb2Zmc2V0WV1bb2Zmc2V0WF0gPyAwIDogMTtcclxuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuZHJhdyh0aGlzLnN0YXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZEdhbGF4eSgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlWzJdWzJdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzNdWzJdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzRdWzJdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzVdWzJdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzZdWzJdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzddWzJdID0gMTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZVsyXVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs0XVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs1XVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs2XVszXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs3XVszXSA9IDE7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVbOV1bMl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbOV1bM10gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbOV1bNF0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbOV1bNV0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbOV1bNl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbOV1bN10gPSAxO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlWzEwXVsyXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsxMF1bM10gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMTBdWzRdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzEwXVs1XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsxMF1bNl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMTBdWzddID0gMTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZVs1XVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs2XVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs3XVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs4XVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVsxMF1bOV0gPSAxO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlWzVdWzEwXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs2XVsxMF0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbN11bMTBdID0gMTtcclxuICAgICAgICB0aGlzLnN0YXRlWzhdWzEwXSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVs5XVsxMF0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMTBdWzEwXSA9IDE7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bNV0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bNl0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bN10gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bOF0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bOV0gPSAxO1xyXG4gICAgICAgIHRoaXMuc3RhdGVbMl1bMTBdID0gMTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVs1XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVs2XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVs3XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVs4XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVs5XSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVszXVsxMF0gPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dDb250cm9scygpIHtcclxuICAgICAgICB2YXIgY29udHJvbHNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbHMnKTtcclxuICAgICAgICBjb250cm9sc0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQ29udHJvbHMoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzJyk7XHJcbiAgICAgICAgY29udHJvbHNEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VTaXplKCkge1xyXG4gICAgICAgIGxldCBuZXdTdGF0ZSA9IHRoaXMuZ2V0RW1wdHkyREFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLmhlaWdodCxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3U3RhdGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBuZXdTdGF0ZVtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbmV3U3RhdGVbaV1bal0gPSAodGhpcy5zdGF0ZVtpXSB8fCBbXSlbal0gfHwgMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0YXRlID0gbmV3U3RhdGU7XHJcbiAgICAgICAgdGhpcy5kcmF3ZXIuZHJhdyh0aGlzLnN0YXRlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcblxyXG5uZXcgUm91dGVyKHJvdXRlcyk7IiwiaW1wb3J0IEdhbWVPZkxpZmUgZnJvbSAnLi9nYW1lT2ZMaWZlJztcclxuaW1wb3J0IERyYXdlciBmcm9tICcuL3V0aWxzL2RyYXdlcic7XHJcblxyXG5sZXQgZ2FtZVNpemUgPSB7XHJcbiAgICB3aWR0aDogK2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy54LWlucHV0JykudmFsdWUsXHJcbiAgICBoZWlnaHQ6ICtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueS1pbnB1dCcpLnZhbHVlXHJcbn07XHJcblxyXG5sZXQgZHJhd2VyID0gbmV3IERyYXdlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpLCBnYW1lU2l6ZSk7XHJcbmxldCBnYW1lID0gbmV3IEdhbWVPZkxpZmUoZ2FtZVNpemUsIDI1MCwgZHJhd2VyKTtcclxuXHJcbmdhbWUuc2hvd0NvbnRyb2xzKCk7XHJcbmxldCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5LWJ1dHRvbicpO1xyXG5zdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGdhbWUudG9nZ2xlR2FtZSgpO1xyXG4gICAgaWYgKGdhbWUucGxheSA9PSB0cnVlKSB7XHJcbiAgICAgICAgc3RhcnRCdXR0b24uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmFzIGZhLXBhdXNlXCI+PC9pPic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0YXJ0QnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhcyBmYS1wbGF5XCI+PC9pPic7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubGV0IHNwZWVkUmFuZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPXJhbmdlXScpO1xyXG5zcGVlZFJhbmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ID0+IHtcclxuICAgIGdhbWUuY2hhbmdlU3BlZWQoZXYudGFyZ2V0LnZhbHVlKTtcclxufSk7XHJcblxyXG5sZXQgeFNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueC1pbnB1dCcpO1xyXG54U2l6ZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBldiA9PiB7XHJcbiAgICBpZiAoZXYudGFyZ2V0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgZ2FtZVNpemUud2lkdGggPSArZXYudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGdhbWUuY2hhbmdlU2l6ZSgpO1xyXG4gICAgICAgIGRyYXdlci5jaGFuZ2VTaXplKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2LnRhcmdldC52YWx1ZSA9IGdhbWVTaXplLndpZHRoO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmxldCB5U2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy55LWlucHV0Jyk7XHJcbnlTaXplLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ID0+IHtcclxuICAgIGlmIChldi50YXJnZXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICBnYW1lU2l6ZS5oZWlnaHQgPSArZXYudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGdhbWUuY2hhbmdlU2l6ZSgpO1xyXG4gICAgICAgIGRyYXdlci5jaGFuZ2VTaXplKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2LnRhcmdldC52YWx1ZSA9IGdhbWVTaXplLmhlaWdodDtcclxuICAgIH1cclxufSk7XHJcblxyXG5sZXQgcm91dGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2Fib3V0JztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnYWJvdXQnLFxyXG4gICAgICAgIG9uQmVmb3JlRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgZ2FtZS5zdG9wR2FtZSgpO1xyXG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtcGxheVwiPjwvaT4nO1xyXG4gICAgICAgICAgICBnYW1lLmhpZGVDb250cm9scygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2Fib3V0Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWJvdXRcIj5cclxuICAgICAgICAgICAgICAgIDxoMT5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhYiBmYS1idXJvbW9iZWxleHBlcnRlIGxhYmVsXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPkNvbndheVxcJ3MgR2FtZSBvZiBMaWZlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9oMT5cclxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIndpa2lcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImxpbmtcIiBocmVmPVwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29ud2F5JTI3c19HYW1lX29mX0xpZmVcIj5XaWtpcGVkaWE8L2E+XHJcbiAgICAgICAgICAgICAgICA8L2gyPlxyXG4gICAgICAgICAgICAgICAgPGgyPjxhIGNsYXNzPVwibGlua1wiIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vQ2l0cmluaW5cIj5BdXRob3IgLSBLYXRlIEt1emtpbmE8L2E+PC9oMj5cclxuICAgICAgICAgICAgPC9kaXY+YDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTGVhdmU6ICgpID0+IHtcclxuICAgICAgICAgICAgZ2FtZS5zaG93Q29udHJvbHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAvZ2FtZS0oLispLyxcclxuICAgICAgICBvbkVudGVyOiB0eXBlID0+IHtcclxuICAgICAgICAgICAgZHJhd2VyLnNldERyYXdlcih0eXBlWzBdKTtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSh0eXBlWzBdKTtcclxuICAgICAgICAgICAgZ2FtZS5wcmVwYXJlR2FtZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25MZWF2ZTogKCkgPT4ge31cclxuICAgIH1cclxuXTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZVBhZ2UobmV3UGFnZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2hyZWYqPVwiJHtuZXdQYWdlfVwiXWApLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID1cclxuICAgICAgICAnYWN0aXZlJztcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEcmF3ZXIge1xyXG4gICAgY29uc3RydWN0b3IoYm9hcmRFbGVtZW50LCBnYW1lU2l6ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudEZvckRyYXdpbmcgPSBib2FyZEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5nYW1lU2l6ZSA9IGdhbWVTaXplO1xyXG5cclxuICAgICAgICB0aGlzLnRleHRCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ByZScpO1xyXG4gICAgICAgIHRoaXMudGV4dEJvYXJkLmNsYXNzTGlzdC5hZGQoJ3RleHQtY29udGVudCcpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICB0aGlzLnN2Z0JvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFxyXG4gICAgICAgICAgICAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFxyXG4gICAgICAgICAgICAnc3ZnJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhdyA9IHRoaXMuZHJhd1RleHQ7XHJcbiAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMudGV4dEJvYXJkO1xyXG5cclxuICAgICAgICB0aGlzLnBpeGVsU2l6ZSA9IDE1O1xyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZVNpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3VGV4dChnYW1lU3RhdGUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgZ2FtZVN0YXRlLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5mb3JFYWNoKChlbGVtZW50LCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZWxlbWVudCA/ICdYJyA6ICcgJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSAnXFxuJztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmJvYXJkLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q2FudmFzKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5ib2FyZC5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHZhciBncmQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLndpZHRoICogdGhpcy5waXhlbFNpemUsXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVNpemUuaGVpZ2h0ICogdGhpcy5waXhlbFNpemVcclxuICAgICAgICApO1xyXG4gICAgICAgIGdyZC5hZGRDb2xvclN0b3AoMCwgJyNjYzgwZmYnKTtcclxuICAgICAgICBncmQuYWRkQ29sb3JTdG9wKDEsICcjZmZiMzY2Jyk7XHJcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVNpemUud2lkdGggKiB0aGlzLnBpeGVsU2l6ZSxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS5oZWlnaHQgKiB0aGlzLnBpeGVsU2l6ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBncmQ7XHJcbiAgICAgICAgZ2FtZVN0YXRlLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5mb3JFYWNoKChlbGVtZW50LCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgaiAqIHRoaXMucGl4ZWxTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpICogdGhpcy5waXhlbFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxTaXplIC0gMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waXhlbFNpemUgLSAyXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1NWRyhnYW1lU3RhdGUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gYCAgICA8ZGVmcz5cclxuICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJNeUdyYWRpZW50XCIgeDE9XCIwXCIgeDI9XCIxXCIgeTE9XCIwXCIgeTI9XCIxXCI+XHJcbiAgICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjAlXCIgIHN0b3AtY29sb3I9XCIjNjZlMGZmXCIvPlxyXG4gICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3RvcC1jb2xvcj1cIiNiMzY2ZmZcIi8+XHJcbiAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cclxuICAgIDwvZGVmcz5gO1xyXG4gICAgICAgIGdhbWVTdGF0ZS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uZm9yRWFjaCgoZWxlbWVudCwgaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICA/IGA8cmVjdCBcclxuICAgICAgICAgICAgICAgICAgICB4PVwiJHtqICogdGhpcy5waXhlbFNpemV9XCJcclxuICAgICAgICAgICAgICAgICAgICB5PVwiJHtpICogdGhpcy5waXhlbFNpemV9XCIgXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIke3RoaXMucGl4ZWxTaXplIC0gMn1cIiBcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIke3RoaXMucGl4ZWxTaXplIC0gMn1cIlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ1cmwoI015R3JhZGllbnQpXCI+PC9yZWN0PmBcclxuICAgICAgICAgICAgICAgICAgICA6ICcnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN2Z0JvYXJkLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBzZXREcmF3ZXIodHlwZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudEZvckRyYXdpbmcuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RleHQnOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcgPSB0aGlzLmRyYXdUZXh0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMudGV4dEJvYXJkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnY2FudmFzJzoge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3ID0gdGhpcy5kcmF3Q2FudmFzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZCA9IHRoaXMuY2FudmFzQm9hcmQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdzdmcnOiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcgPSB0aGlzLmRyYXdTVkc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkID0gdGhpcy5zdmdCb2FyZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhdyA9IHRoaXMuZHJhd1RleHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkID0gdGhpcy50ZXh0Qm9hcmQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVsZW1lbnRGb3JEcmF3aW5nLmFwcGVuZENoaWxkKHRoaXMuYm9hcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZVNpemUoKSB7XHJcbiAgICAgICAgdGhpcy5zdmdCb2FyZC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICdoZWlnaHQnLFxyXG4gICAgICAgICAgICB0aGlzLmdhbWVTaXplLmhlaWdodCAqIHRoaXMucGl4ZWxTaXplXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnN2Z0JvYXJkLnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgJ3dpZHRoJyxcclxuICAgICAgICAgICAgdGhpcy5nYW1lU2l6ZS53aWR0aCAqIHRoaXMucGl4ZWxTaXplXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXNCb2FyZC5oZWlnaHQgPSB0aGlzLmdhbWVTaXplLmhlaWdodCAqIHRoaXMucGl4ZWxTaXplO1xyXG4gICAgICAgIHRoaXMuY2FudmFzQm9hcmQud2lkdGggPSB0aGlzLmdhbWVTaXplLndpZHRoICogdGhpcy5waXhlbFNpemU7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gKiBAcGFyYW0geyp9IHJvdXRlUGFyYW1zINC80LDRgdGB0LjQsiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QslxyXG4gKi9cclxuZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlUGFyYW1zIHx8IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICB0aGlzLnByZXZpb3VzUm91dGU7XHJcbiAgICB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICB0aGlzLnByZXZpb3VzUGFyYW1zO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLmhhbmRsZXIod2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG4gICAgfSlcclxuICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbn1cclxuXHJcblJvdXRlci5wcm90b3R5cGUgPSB7XHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbihoYXNoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlID0gdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1BhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZSA9IHRoaXMuZmluZE5ld1JvdXRlKGhhc2gpO1xyXG4gICAgICAgIHRoaXMubGF1bmNoSGFuZGxlcnMoKTtcclxuICAgIH0sXHJcbiAgICBmaW5kTmV3Um91dGU6IGZ1bmN0aW9uKGhhc2gpIHtcclxuICAgICAgICBoYXNoID0gaGFzaC5zbGljZSgxKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJvdXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMucm91dGVzW2ldO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGVsZW1lbnQubWF0Y2gpID09IFwic3RyaW5nXCIgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGVsZW1lbnQubWF0Y2gpID09IFwiZnVuY3Rpb25cIiAmJiBlbGVtZW50Lm1hdGNoKGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgoZWxlbWVudC5tYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCkgJiYgZWxlbWVudC5tYXRjaC50ZXN0KGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBoYXNoLm1hdGNoKGVsZW1lbnQubWF0Y2gpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGxhdW5jaEhhbmRsZXJzKCkge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5wcmV2aW91c1JvdXRlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlKHRoaXMucHJldmlvdXNQYXJhbXMpIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyKHRoaXMuY3VycmVudFBhcmFtcykgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLmN1cnJlbnRSb3V0ZSAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyICYmIHRoaXMuY3VycmVudFJvdXRlLm9uRW50ZXIodGhpcy5jdXJyZW50UGFyYW1zKSB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUm91dGVyOyJdfQ==
